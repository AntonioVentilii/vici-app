{
	"kind": "build_request",
	"title": "Add admin role management with owner and configurable admins",
	"priority": "normal",
	"requirements": [
		{
			"id": "REQ-32",
			"text": "Add a single canister owner Principal to the backend that is set at initialization and cannot be changed afterwards",
			"target": "backend",
			"source": {
				"messageIds": ["msg-last"],
				"quotes": ["there is an owner (only one principal?)"]
			},
			"acceptanceCriteria": [
				"Backend stores a single owner Principal in stable state",
				"Owner Principal is set during canister initialization",
				"Owner Principal cannot be modified after initialization"
			]
		},
		{
			"id": "REQ-33",
			"text": "Maintain a set of admin Principals in the backend that can be managed by the owner",
			"target": "backend",
			"source": {
				"messageIds": ["msg-last"],
				"quotes": ["i would like to find a way to conntrol who is admin and who is not"]
			},
			"acceptanceCriteria": [
				"Backend stores a Set of admin Principals in stable state",
				"Admin set persists across canister upgrades",
				"Owner Principal is automatically included as an admin"
			]
		},
		{
			"id": "REQ-34",
			"text": "Add backend functions for the owner to add and remove admin Principals",
			"target": "backend",
			"source": {
				"messageIds": ["msg-last"],
				"quotes": ["i would like to find a way to conntrol who is admin and who is not"]
			},
			"acceptanceCriteria": [
				"Owner can call a function to add a Principal to the admin set",
				"Owner can call a function to remove a Principal from the admin set",
				"Only the owner can add or remove admins",
				"Functions return appropriate success or error responses"
			]
		},
		{
			"id": "REQ-35",
			"text": "Add a backend query function that returns the list of current admin Principals",
			"target": "backend",
			"source": {
				"messageIds": ["msg-last"]
			},
			"acceptanceCriteria": [
				"Any user can query the list of admin Principals",
				"The list includes the owner Principal",
				"The list includes all added admin Principals"
			]
		},
		{
			"id": "REQ-36",
			"text": "Update all existing admin-only backend functions to check if the caller is in the admin set or is the owner",
			"target": "backend",
			"source": {
				"messageIds": ["msg-last"]
			},
			"acceptanceCriteria": [
				"Market resolution functions check admin access",
				"Grant ViciCoins function checks admin access",
				"Market creation function checks admin access",
				"Functions reject unauthorized callers with appropriate error messages"
			]
		},
		{
			"id": "REQ-37",
			"text": "Add an Admin Management section to the AdminPage displaying the current list of admins with their Principal IDs",
			"target": "frontend",
			"source": {
				"messageIds": ["msg-last"]
			},
			"acceptanceCriteria": [
				"Admin list shows all current admin Principals",
				"Each admin entry displays the full Principal ID",
				"The owner Principal is visibly marked or indicated",
				"The section is displayed alongside existing admin tabs"
			]
		},
		{
			"id": "REQ-38",
			"text": "Add a form in the Admin Management section allowing the owner to add a new admin by entering a Principal ID",
			"target": "frontend",
			"source": {
				"messageIds": ["msg-last"],
				"quotes": ["i would like to find a way to conntrol who is admin and who is not"]
			},
			"acceptanceCriteria": [
				"Form includes an input field for Principal ID",
				"Form includes an 'Add Admin' submit button",
				"Form validates Principal ID format before submission",
				"Form is only visible to the owner",
				"Success and error feedback is displayed via toast notifications"
			]
		},
		{
			"id": "REQ-39",
			"text": "Add remove buttons next to each admin entry in the Admin Management section allowing the owner to revoke admin access",
			"target": "frontend",
			"source": {
				"messageIds": ["msg-last"],
				"quotes": ["i would like to find a way to conntrol who is admin and who is not"]
			},
			"acceptanceCriteria": [
				"Each admin (except the owner) has a remove button",
				"Remove button is only visible to the owner",
				"Clicking remove button triggers confirmation",
				"Success and error feedback is displayed via toast notifications",
				"Admin list updates immediately after removal"
			]
		},
		{
			"id": "REQ-40",
			"text": "Add React Query hooks in useQueries.ts for admin management operations: useAdminList query hook, useAddAdmin and useRemoveAdmin mutation hooks with appropriate cache invalidation",
			"target": "frontend",
			"source": {
				"messageIds": ["msg-last"]
			},
			"acceptanceCriteria": [
				"useAdminList fetches current admin list from backend",
				"useAddAdmin mutation invalidates admin list cache on success",
				"useRemoveAdmin mutation invalidates admin list cache on success",
				"All hooks handle loading and error states appropriately"
			]
		}
	],
	"constraints": [
		"Maintain single-actor architecture in backend/main.mo",
		"Owner Principal must be immutable after initialization",
		"Owner Principal is always implicitly an admin and cannot be removed from admin set",
		"Do not modify files in frontend/src/components/ui or other immutablePaths"
	],
	"nonGoals": [
		"Multi-owner functionality",
		"Role-based permissions beyond owner/admin distinction",
		"Admin invitation or approval workflow",
		"Admin activity logging or audit trail"
	],
	"imageRequirements": {
		"required": [],
		"edits": []
	}
}
